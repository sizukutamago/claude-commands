# Claude Init - プロジェクト初期化コマンド

このコマンドは、空のプロジェクトに Claude 用の CLAUDE.md ファイルを生成し、開発ルールを設定します。

## ステップ 1: 現在のディレクトリ確認

まず、現在のディレクトリがプロジェクトのルートディレクトリであることを確認します。
`pwd` コマンドで現在位置を表示し、正しい場所にいることを確認してください。

## ステップ 2: 既存の CLAUDE.md ファイルの確認

既存の CLAUDE.md ファイルがあるかチェックします。
- ファイルが存在する場合: バックアップを作成するか確認してください
- ファイルが存在しない場合: 新規作成を続行します

## ステップ 3: プロジェクトタイプの判定

プロジェクトのタイプを判定します：
1. package.json の存在確認 → Node.js/JavaScript/TypeScript プロジェクト
2. Cargo.toml の存在確認 → Rust プロジェクト
3. go.mod の存在確認 → Go プロジェクト
4. requirements.txt または pyproject.toml の存在確認 → Python プロジェクト
5. Gemfile の存在確認 → Ruby プロジェクト
6. pom.xml または build.gradle の存在確認 → Java プロジェクト

## ステップ 4: claude-rule リポジトリの内容を取得

https://github.com/sizukutamago/claude-rule.git の内容を参照し、以下のルールテンプレートを取得します：
- 基本的な開発ルール
- プロジェクトタイプ別の推奨設定
- ベストプラクティス

## ステップ 5: CLAUDE.md ファイルの生成

以下の構造で CLAUDE.md ファイルを作成します：

```markdown
# プロジェクト名

## プロジェクト概要
[プロジェクトの簡単な説明を記載]

## 技術スタック
[検出された技術スタックを記載]

## ディレクトリ構成
[主要なディレクトリとその役割を記載]

## 開発ルール

### 基本ルール
- コードの変更時は既存のコーディングスタイルに従う
- 新しいファイルを作成する前に既存のファイルの編集を検討する
- ドキュメントファイル（*.md）は明示的に要求された場合のみ作成する
- コミットメッセージは変更内容を明確に記述する

### コーディング規約
[プロジェクトタイプに応じた規約を記載]

### テスト
[テストの実行方法と方針を記載]

### ビルドとデプロイ
[ビルドコマンドとデプロイ手順を記載]

## よく使うコマンド
[プロジェクトでよく使用するコマンドを記載]

## 注意事項
[プロジェクト固有の注意事項を記載]

## 参照
- 開発ルール: https://github.com/sizukutamago/claude-rule
```

## ステップ 6: プロジェクト固有の情報を追加

以下の情報を自動的に検出して追加します：
1. README.md がある場合、その内容を参照してプロジェクト概要を補完
2. package.json や他の設定ファイルから利用可能なスクリプト/コマンドを抽出
3. テストフレームワークの検出と実行方法の記載
4. .gitignore の内容から重要な除外パターンを確認

## ステップ 7: ファイルの保存と確認

1. CLAUDE.md ファイルを保存
2. ファイルの内容を表示して確認
3. 必要に応じて手動で編集するよう案内

## ステップ 8: Git への追加提案

CLAUDE.md ファイルを Git に追加することを提案：
```bash
git add CLAUDE.md
git commit -m "Add CLAUDE.md for Claude Code configuration"
```

## 完了メッセージ

「CLAUDE.md ファイルが正常に作成されました。必要に応じて内容をカスタマイズしてください。」と表示します。

---

## エラーハンドリング

- 既存の CLAUDE.md がある場合: 上書きの確認またはバックアップの作成
- プロジェクトタイプが判定できない場合: 汎用的なテンプレートを使用
- claude-rule リポジトリにアクセスできない場合: 基本的なテンプレートを使用

## 補足

このコマンドは、プロジェクトの初期セットアップを簡素化し、Claude Code との連携を最適化するために設計されています。生成されたファイルは、プロジェクトの成長に合わせて更新することを推奨します。